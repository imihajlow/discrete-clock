* /Users/ivan/projects/discrete_clock/models/counter.asc
XX1 RST N001 N002 NQ1 Q1 Vcc ff-arst-nmos-diode
V1 Vcc 0 5
V2 N001 0 PULSE(0 5 0 100n 100n 500m 1)
V3 N002 0 PULSE(0 5 500m 100n 100n 500m 1)
V4 RSTin 0 PULSE(0 5 2.6 1n 1n 29 60)
XX2 RST NQ1 Q1 NQ2 Q2 Vcc ff-arst-nmos-diode
XX3 RST NQ2 Q2 NQ4 Q4 Vcc ff-arst-nmos-diode
XX4 RST NQ4 Q4 NQ8 Q8 Vcc ff-arst-nmos-diode
M1 N011 N012 0 0 2N7002
D1 N012 NQ1 1N4148
D2 N012 Q2 1N4148
D3 N012 NQ4 1N4148
D4 N012 Q8 1N4148
R1 Vcc N012 20k
D5 RST N011 1N4148
D6 RST RSTin 1N4148
D7 N014 NQ1 1N4148
D8 N014 NQ2 1N4148
D9 N014 NQ4 1N4148
D10 N014 NQ8 1N4148
R2 Vcc N014 20k
M2 NC N014 0 0 2N7002
XX5 NC_01 N007 N006 N003 N008 Vcc ff-arst-nmos-diode
XX6 NC_02 N003 N008 N004 N009 Vcc ff-arst-nmos-diode
XX7 NC_03 N004 N009 N005 N010 Vcc ff-arst-nmos-diode
XX8 NC_04 N005 N010 NC_05 NC_06 Vcc ff-arst-nmos-diode
C1 N014 0 1n
M3 C N013 0 0 2N7002
D11 Q1 N013 1N4148
D12 Q2 N013 1N4148
D13 Q4 N013 1N4148
D14 Q8 N013 1N4148
R3 Vcc Q1 10k
R4 Vcc Q2 10k
R5 Vcc Q4 10k
R6 Vcc Q8 10k
R7 N013 0 40k
D15 P001 NQ1 NSCW100
R8 Vcc P001 50
D16 P002 NQ2 NSCW100
R9 Vcc P002 50
D17 P003 NQ4 NSCW100
R10 Vcc P003 50
D18 P004 NQ8 NSCW100
R11 Vcc P004 50
XX9 C Bin NC Vcc N006 N007 nxor
V5 Bin 0 PULSE(0 5 1700m 100n 100n 670m 1.7)

* block symbol definitions
.subckt ff-arst-nmos-diode ARST CLK NCLK NQ Q Vcc
M1 NS1 G1 0 0 2N7002
D1 G1 NQ 1N4148
D2 G1 ARST 1N4148
D3 G1 NCLK 1N4148
M2 NR1 G2 0 0 2N7002
D4 G2 NCLK 1N4148
D5 G2 Q 1N4148
M3 Q0 G3 0 0 2N7002
D7 G3 NS1 1N4148
D8 G3 NQ0 1N4148
M4 NQ0 G4 0 0 2N7002
D10 G4 Q0 1N4148
D11 G4 NR1 1N4148
D12 G4 ARST 1N4148
M5 NS2 G5 0 0 2N7002
D6 G5 Q0 1N4148
D9 G5 ARST 1N4148
D13 G5 CLK 1N4148
M6 NR2 G6 0 0 2N7002
D14 G6 CLK 1N4148
D15 G6 NQ0 1N4148
M7 Q G7 0 0 2N7002
D16 G7 NS2 1N4148
D17 G7 NQ 1N4148
M8 NQ G8 0 0 2N7002
D18 G8 Q 1N4148
D19 G8 NR2 1N4148
D20 G8 ARST 1N4148
R1 Vcc G1 {R}
R3 Vcc G3 {R}
R5 Vcc G5 {R}
R7 Vcc G7 {R}
R9 Vcc G2 {R}
R11 Vcc G4 {R}
R13 Vcc G6 {R}
R15 Vcc G8 {R}
C1 0 G1 {C}
C2 G2 0 {C}
C3 0 G4 {C}
C4 0 G3 {C}
C5 0 G5 {C}
C6 0 G6 {C}
C7 0 G8 {C}
C8 0 G7 {C}
.param R=20k
.param C=0.01p
.ends ff-arst-nmos-diode

.subckt nxor A B NA Vcc NQ Q
D1 N002 A 1N4148
M1 NB B 0 0 2N7002
D2 N002 NB 1N4148
D3 N004 NA 1N4148
D4 N004 B 1N4148
D5 Q N001 1N4148
D6 Q N003 1N4148
M2 N001 N002 0 0 2N7002
M3 N003 N004 0 0 2N7002
M4 NQ Q 0 0 2N7002
R1 Vcc N002 20k
R2 Vcc N004 20k
R3 Vcc Q 20k
R4 B Vcc 20k
.ends nxor

.model D D
.lib /Users/ivan/Library/Application Support/LTspice/lib/cmp/standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib /Users/ivan/Library/Application Support/LTspice/lib/cmp/standard.mos
.tran 0 40
.backanno
.end
